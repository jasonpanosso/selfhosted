apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base/servarr

secretGenerator:
  - name: servarr-api-keys
    namespace: servarr
    envs:
      - secrets/servarr_api_keys.env.encrypted
  - name: servarr-api-keys
    namespace: monitoring
    envs:
      - secrets/servarr_api_keys.env.encrypted
  - name: radarr-db
    namespace: servarr
    files:
      - password=secrets/radarr_db_password.encrypted
    literals:
      - username=radarr
  - name: sonarr-db
    namespace: servarr
    files:
      - password=secrets/sonarr_db_password.encrypted
    literals:
      - username=sonarr
  - name: prowlarr-db
    namespace: servarr
    files:
      - password=secrets/prowlarr_db_password.encrypted
    literals:
      - username=prowlarr
  - name: jellyseerr-db
    namespace: servarr
    files:
      - password=secrets/jellyseerr_db_password.encrypted
    literals:
      - username=jellyseerr
  - name: jellyfin-db
    namespace: servarr
    files:
      - password=secrets/jellyfin_db_password.encrypted
    literals:
      - username=jellyfin
  - name: ovpn-conf
    namespace: servarr
    files:
      - mv_ams.ovpn=secrets/ovpn.conf.encrypted
      - vpn_ca.crt=secrets/vpn_ca.crt.encrypted
      - vpn_userpass.txt=secrets/vpn_userpass.txt.encrypted
