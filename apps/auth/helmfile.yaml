repositories:
  - name: bitnami
    url: "https://charts.bitnami.com/bitnami"

releases:
  - name: auth-secrets
    namespace: auth
    chart: ./auth-secrets
    values:
      - secrets.enc.yaml

  - name: redis
    namespace: auth
    chart: bitnami/redis
    version: 20.6.3
    values:
      - architecture: replication
      - sentinel:
          enabled: true
          masterSet: "mymaster"
      - auth:
          existingSecret: "redis-secret"
          existingSecretPasswordKey: "password"
          enableReplicaAuth: true
      - master:
          resources:
            requests:
              cpu: "200m"
              memory: "256Mi"
            limits:
              cpu: "400m"
              memory: "512Mi"
      - replica:
          replicaCount: 3
          resources:
            requests:
              cpu: "100m"
              memory: "128Mi"
            limits:
              cpu: "200m"
              memory: "256Mi"
    needs:
      - auth-secrets
